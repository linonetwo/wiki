{"tiddlers":{"$:/plugins/oeyoews/tiddlywiki-giscus/readme":{"title":"$:/plugins/oeyoews/tiddlywiki-giscus/readme","text":"<a style=\"text-decoration:none;\" href=\"https://github.com/oeyoews/neotw\" target=\"_blank\">\n  <img src=\"https://img.shields.io/badge/Powered by-Neotw-green?style=flat\" />\n</a>\n<a style=\"text-decoration:none;\" href=\"https://giscus.app/\" target=\"_blank\">\n  <img src=\"https://img.shields.io/badge/Powered by-giscus-blue?style=flat\" />\n</a>\n<$image source={{{ [[][https://img.shields.io/badge/Version-]] [<currentTiddler>get[version]] [[-red?style=flat&logo=dev.to&logoColor=red]] +[join[]]}}} />\n<$image source={{{ [[][https://img.shields.io/badge/Author-]] [<currentTiddler>get[author]] [[-lightblue?style=flat]] +[join[]]}}} />\n\n<center>\n<$button class=\"get-started\">\n  <a style=\"text-decoration: none;\" target=\"_blank\"\n  href=\"https://neotw.netlify.app/main.html#%24%3A%2Fplugins%2Foeyoews%2Ftiddlywiki-giscus\">\n  Install Giscus\n</a>\n</$button>\n\n<<nbtn \"$:/plugins/oeyoews/tiddlywiki-giscus/giscus-config\">>\n\n<$set name=\"repo\" value=\"$:/plugins/oeyoews/tiddlywiki-giscus/config\">\n  <$button class=\"get-started\" tooltip={{{ [<repo>get[repo]addsuffix[ discussions]] }}}>\n    <<giscusDiscussions>> Discussions\n  </$button>\n</$set>\n</center>\n\n<<<\nðŸ’Ž A Commenting System Powered By Github Discussions. Let Visitors Leave Comments And Reactions On Your Site With Github! This Project Is Strongly Inspired By Utterances.\n<<<\n\n!! TODO\n\n* jump to comment directly\n* [[discus|https://bimlas.gitlab.io/tw5-disqus]]\n<!-- * js macro and widget to get config tid data difference(load order) -->\n<!-- * add toggle on local -->\n\n<!---->\n<!-- * Split giscus config and add filter configurable -->\n<!-- * add jump to comment and how to toggle for toolbar [[example|https://tw5-github-comments.joseli.to/]] -->\n\n<!-- !function(){'use strict';exports.name='github-comments',exports.params=[{name:'current'}],exports.run=function(t){if($tw.browser){const e=document.getElementById('gh-comments');null!==e&&e.remove();const i=document.createElement('script');i.async=!0,i.src='https://utteranc.es/client.js',i.setAttribute('repo',$tw.wiki.getTiddlerText('$:/config/breakzplatform/github-comments/repo')),i.setAttribute('issue-term','['+$tw.wiki.getTiddlerText('$:/config/breakzplatform/github-comments/url')+'] '+t),i.setAttribute('theme',$tw.wiki.getTiddlerText('$:/config/breakzplatform/github-comments/theme')),i.setAttribute('crossorigin','anonymous');const n=document.createElement('div');n.id='gh-comments',n.appendChild(i),document.querySelector('div[data-tiddler-title=\"'+t+'\"] .gh-comments-wrapper').appendChild(n),$tw.utils.nextTick(function(){$tw.rootWidget.dispatchEvent({type:'github-comments-did-insert-element',target:n})})}}}(); -->\n"},"$:/plugins/oeyoews/tiddlywiki-giscus/config":{"title":"$:/plugins/oeyoews/tiddlywiki-giscus/config","type":"text/vnd.tiddlywiki"},"$:/plugins/oeyoews/tiddlywiki-giscus/explore":{"title":"$:/plugins/oeyoews/tiddlywiki-giscus/explore","text":"<$macrocall $name=\"tree\" prefix={{{ [<currentTiddler>addsuffix[/]] }}}>\n"},"$:/plugins/oeyoews/tiddlywiki-giscus/filter":{"title":"$:/plugins/oeyoews/tiddlywiki-giscus/filter","giscus":"","text":"[field:giscus[yes]]\n"},"$:/plugins/oeyoews/tiddlywiki-giscus/giscus-config":{"title":"$:/plugins/oeyoews/tiddlywiki-giscus/giscus-config","text":"\\whitespace trim\n\n\\define tid() $:/plugins/oeyoews/tiddlywiki-giscus/config\n\\define tidFilter() $:/plugins/oeyoews/tiddlywiki-giscus/filter\n\nYou may have to save and reload the wiki to activate changes.\n\n* Install giscus for your github repo [[Install Giscus|https://github.com/apps/giscus/installations/new]]\n* [[get giscus parameter|https://giscus.app/zh-CN]]\n\nchange badge style &nbsp;\n<$select field=\"style\" tiddler=<<tid>> tooltip='badge style'>\n</$set>\n  <option>for-the-badge</option>\n  <option>flat</option>\n  <option>plastic</option>\n  <option>flat-square</option>\n  <option>social</option>\n</$select>\n<<giscusBadge>>\n\n<table>\n  <tr>\n    <th align=\"left\">Github Repo Link:</th>\n    <td>\n      <$edit-text\n          tiddler=<<tid>>\n          field=\"repo\"\n          tag=\"input\"\n          placeholder=\"username/repo\"\n          default=\"\" />\n    </td>\n  </tr>\n  <tr>\n    <th align=\"left\">Github Reop Id:</th>\n    <td>\n      <$edit-text\n          tiddler=<<tid>>\n          field=\"repoId\"\n          tag=\"input\"\n          placeholder=\"TSJHFJDKHJExxx\"\n          default=\"\" />\n    </td>\n  </tr>\n  <tr>\n    <th align=\"left\">Github Repo Category Id:</th>\n    <td>\n      <$edit-text\n          tiddler=<<tid>>\n          field=\"categoryId\"\n          placeholder=\"DKSOFHGJVDKLXX\"\n          tag=\"input\"\n          default=\"\" />\n    </td>\n  </tr>\n\n  <tr>\n    <th align=\"left\">filter:</th>\n      <td>\n        <$edit-text\n            tiddler=<<tidFilter>>\n            placeholder=\"[!is[system]]\"\n            tag=\"input\"\n            default=\"\" />\n      </td>\n\n    <!-- not suitable on mobile(ios at least) -->\n    <td>\n      <$button>\n        Reset filter\n        <$action-deletetiddler $tiddler=<<tidFilter>>>/>\n      </$button>\n    </td>\n\n  </tr>\n</table>\n"},"$:/plugins/oeyoews/tiddlywiki-giscus/icon":{"title":"$:/plugins/oeyoews/tiddlywiki-giscus/icon","text":"<span style=\"font-size: 24pt;\">ðŸ’Ž</span>\n"},"$:/plugins/oeyoews/tiddlywiki-giscus/icon01":{"title":"$:/plugins/oeyoews/tiddlywiki-giscus/icon01","type":"image/png","text":"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\n"},"$:/plugins/oeyoews/tiddlywiki-giscus/macro/discussions":{"title":"$:/plugins/oeyoews/tiddlywiki-giscus/macro/discussions","tags":"$:/tags/Macro","text":"\\whitespace trim\n\n\\define giscusDiscussions()\n<$set name=\"base-repo\" value=\"https://github.com/\">\n<$set name=\"target\" value=\"$:/plugins/oeyoews/tiddlywiki-giscus/config\">\n  <$button class=<<tv-config-toolbar-class>>>\n    <a href={{{ [<target>get[repo]addsuffix[/discussions]addprefix<base-repo>]}}} target=\"_blank\">\nðŸ’Ž\n    </a>\n  </$button>\n</$set>\n</$set>\n\\end\n\n\\define giscusBadge()\n<$set name=\"base-repo\" value=\"https://github.com/\">\n<$set name=\"imgshield\" value=\"https://img.shields.io/github/discussions/\">\n<$set name=\"target\" value=\"$:/plugins/oeyoews/tiddlywiki-giscus/config\">\n  <$button class=<<tv-config-toolbar-class>>>\n    <a href={{{ [<target>get[repo]addsuffix[/discussions]addprefix<base-repo>]}}} target=\"_blank\">\n      <img alt=\"discussions count\" src={{{ [<target>get[repo]addprefix<imgshield>addsuffix[?style=]] [<target>get[style]] +[join[]]}}} >\n    </a>\n  </$button>\n</$set>\n</$set>\n</$set>\n\\end\n"},"$:/plugins/oeyoews/tiddlywiki-giscus/macro/get-started":{"title":"$:/plugins/oeyoews/tiddlywiki-giscus/macro/get-started","tags":"$:/tags/Macro","text":"<!-- general -->\n\\define nbtn(started-tid, class:\"get-started\", caption:\"Get Started\")\n  <$button class=$class$ tooltip=\"$caption$\">\n    $caption$\n    <!-- list filter todo -->\n    <$action-navigate $to={{{ $started-tid$ }}}/>\n  </$button>\n\\end\n"},"$:/plugins/oeyoews/tiddlywiki-giscus/style":{"title":"$:/plugins/oeyoews/tiddlywiki-giscus/style","tags":"$:/tags/Stylesheet","text":"<!-- hide powered not work-->\n.gsc-left-header {\n    display: none !important;\n}\n\n#__next .text-sm {\n    font-size: .875rem;\n    line-height: 1.25rem;\n\t\tcolor: red !important;\n}\n\n<!-- btn style -->\n.get-started {\n\t\tdisplay: inline-block;\n    font-size: 16px;\n    <!-- background-color: rgb(97, 218, 251); -->\n    color: rgb(0, 0, 0);\n    padding: 10px 25px;\n    border-radius: 5px;\n    border-color: white;\n    white-space: nowrap;\n    transition: background-color 0.2s ease-out 0s;\n}\n\n.nbtn {\n\t\tdisplay: inline-block;\n    <!-- background-color: rgb(97, 218, 251); -->\n    color: rgb(0, 0, 0);\n    padding: 3px 8px;\n    white-space: nowrap;\n    border-radius: 5px;\n    transition: background-color 0.2s ease-out 0s;\n}\n\n.giscus-footer {\n    color: #aaaaaa;\n    font-size: 14px;\n}\n\n.giscus-footer:hover {\n    <!-- border-bottom: 2px solid; -->\n    <!-- color: black; -->\n}\n"},"$:/plugins/oeyoews/tiddlywiki-giscus/viewtemplate":{"title":"$:/plugins/oeyoews/tiddlywiki-giscus/viewtemplate","tags":"$:/tags/ViewTemplate","text":" <$list filter=\"[all[current]!is[system]!is[draft]subfilter{$:/plugins/oeyoews/tiddlywiki-giscus/filter}]\" variable=\"comment\">\n        <$set name=\"stateTiddler\" value=\"$:/state/oeyoews/github-giscus-comments\">\n          <$reveal type=\"nomatch\" state=<<stateTiddler>> text=<<currentTiddler>>>\n              <$button class=\"tc-btn-invisible giscus-footer\" set=<<stateTiddler>> setTo=<<currentTiddler>> >\n                  Show Comments\n              </$button>\n          </$reveal>\n          <$reveal type=\"match\" state=<<stateTiddler>> text=<<currentTiddler>>>\n              <$button class=\"tc-btn-invisible giscus-footer\" set=<<stateTiddler>> setTo=\"\">\n                  Fold Comments\n              </$button>\n              <!-- load giscus -->\n              <$giscus id=<<comment>> lang=\"en\" theme=\"light\"/>\n          </$reveal>\n        </$set>\n</$list>\n"},"$:/plugins/oeyoews/tiddlywiki-giscus/widget":{"title":"$:/plugins/oeyoews/tiddlywiki-giscus/widget","module-type":"widget","type":"application/javascript","text":"(function() {\n    \"use strict\";\n\n    // tmp settings\n    // var usernameTiddler = \"neotw/username\";\n    // var username = $tw.wiki.getTiddlerText(usernameTiddler);\n    // if(username !== \"oeyoews\")\n    // {\n    //   alert(\"This giscus tiddlywiki plugin just for oeyoews build after version 0.7.0\")\n    //   console.error(\"This giscus tiddlywiki plugin just for oeyoews build after version 0.7.0\")\n    //   return;\n    // }\n\n    var Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\n    var GiscusNodeWidget = function(parseTreeNode, options) {\n        this.initialise(parseTreeNode, options);\n    };\n\n    // ?? not suport repo-id filed, use repoId instead\n    var giscusConfigTiddler = \"$:/plugins/oeyoews/tiddlywiki-giscus/config\"\n    // console.log(giscusConfigTiddler)\n    var giscusConfigTiddlerGet = $tw.wiki.getTiddler(giscusConfigTiddler)\n    var config = giscusConfigTiddlerGet ? giscusConfigTiddlerGet.fields : {};\n    // console.log(config)\n\n    // debug\n    // console.log(config.repo)\n    // console.log(config.repoId)\n    // console.log(config.categoryId)\n\n    <!-- var repo = \"oeyoews/neotw\"; -->\n    <!-- var repoId = \"R_kgDOH5A5OA\"; -->\n    <!-- var categoryId = \"DIC_kwDOH5A5OM4CRFEE\"; -->\n\n    GiscusNodeWidget.prototype = new Widget();\n    GiscusNodeWidget.prototype.render = function(parent, nextSibling) {\n        this.parentDomNode = parent;\n        this.computeAttributes();\n        this.execute();\n        var id = this.getAttribute(\"id\", \"\");\n        var lang = this.getAttribute(\"lang\", \"en\");\n        var theme = this.getAttribute(\"theme\", \"light\");\n        if (id === '') return;\n        var scriptNode = this.document.createElement('script');\n        scriptNode.setAttribute(\"src\", \"https://giscus.app/client.js\");\n\n        scriptNode.setAttribute(\"data-repo\", config.repo);\n        scriptNode.setAttribute(\"data-repo-id\", config.repoId);\n        scriptNode.setAttribute(\"data-category\", \"General\");\n        scriptNode.setAttribute(\"data-category-id\", config.categoryId);\n\n        scriptNode.setAttribute(\"data-mapping\", \"specific\");\n        scriptNode.setAttribute(\"data-term\", id);\n        scriptNode.setAttribute(\"data-reactions-enabled\", \"1\");\n        scriptNode.setAttribute(\"data-emit-metadata\", \"0\");\n        scriptNode.setAttribute(\"data-input-position\", \"top\");\n        <!-- scriptNode.setAttribute(\"data-loading\", \"lazy\"); -->\n        scriptNode.setAttribute(\"data-theme\", theme);\n        scriptNode.setAttribute(\"data-lang\", lang);\n        scriptNode.setAttribute(\"crossorigin\", \"anonymous\");\n        scriptNode.setAttribute(\"async\", \"true\");\n        // Clear other comment nodes' giscus class\n        var commentNodes = this.document.querySelectorAll('.giscus');\n        for (var i = 0, len = commentNodes.length; i < len; i++) {\n            commentNodes[i].classList.remove('giscus');\n        }\n        // Find or create\n      var commentNode = this.document.querySelector('.oeyoews-giscus[tiddler-title=\"' + id.replace('\"', '\\\\\"') + '\"]');\n      if (!commentNode) {\n        commentNode = this.document.createElement('div');\n        commentNode.setAttribute('class', 'giscus oeyoews-giscus');\n        commentNode.setAttribute('tiddler-title', id);\n        parent.insertBefore(commentNode, nextSibling);\n        this.domNodes.push(commentNode);\n      }\n        parent.insertBefore(scriptNode, nextSibling);\n        this.domNodes.push(scriptNode);\n    };\n    GiscusNodeWidget.prototype.execute = function() {};\n    GiscusNodeWidget.prototype.refresh = function() {\n        var changedAttributes = this.computeAttributes();\n        if (Object.keys(changedAttributes).length > 0) {\n            this.refreshSelf();\n            return true;\n        } else {\n            return false;\n        }\n    };\n    exports.giscus = GiscusNodeWidget;\n})();\n"}}}