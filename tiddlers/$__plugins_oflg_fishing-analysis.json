{"tiddlers":{"$:/plugins/oflg/fishing-analysis/calendar/calendar.js":{"title":"$:/plugins/oflg/fishing-analysis/calendar/calendar.js","text":"/*\\\ntitle: $:/plugins/oflg/fishing-analysis/calendar/calendar.js\ntype: application/javascript\nmodule-type: echarts-component\nCalendar for Fishing.\n\\*/\nexports.shouldUpdate = \"[{$:/temp/fishing!!year}]\";\n\nexports.onUpdate = function (myChart) {\n    var calendarLan = $tw.wiki.filterTiddlers(\"[{$:/language}removeprefix[$:/]addprefix[$:/plugins/oflg/fishing-analysis/]getindex[calendar]]~[[$:/plugins/oflg/fishing-analysis/languages/en-GB]getindex[calendar]]\")[0],\n        memorizeLan = $tw.wiki.filterTiddlers(\"[{$:/language}removeprefix[$:/]addprefix[$:/plugins/oflg/fishing-analysis/]getindex[memorize]]~[[$:/plugins/oflg/fishing-analysis/languages/en-GB]getindex[memorize]]\")[0],\n        dueLan = $tw.wiki.filterTiddlers(\"[{$:/language}removeprefix[$:/]addprefix[$:/plugins/oflg/fishing-analysis/]getindex[due]]~[[$:/plugins/oflg/fishing-analysis/languages/en-GB]getindex[due]]\")[0],\n        year1stLan = $tw.wiki.filterTiddlers(\"[{$:/language}removeprefix[$:/]addprefix[$:/plugins/oflg/fishing-analysis/]getindex[year1st]]~[[$:/plugins/oflg/fishing-analysis/languages/en-GB]getindex[year1st]]\")[0],\n        year2stLan = $tw.wiki.filterTiddlers(\"[{$:/language}removeprefix[$:/]addprefix[$:/plugins/oflg/fishing-analysis/]getindex[year2st]]~[[$:/plugins/oflg/fishing-analysis/languages/en-GB]getindex[year2st]]\")[0];\n\n    var year = Number($tw.wiki.filterTiddlers(\"[{$:/temp/fishing!!year}]\")[0]) || new Date().getFullYear();\n\n    var fishArry = $tw.wiki.filterTiddlers(\"[has[due]][has[history]]\");\n\n    var dueDayArry = [],\n        reviewDayArry = [];\n\n    function twTime2twDayArry(twTime, dayArry) {\n        var day = $tw.wiki.filterTiddlers(\"[[\" + twTime + \"]format:date[YYYY-0MM-0DD]]\")[0];\n\n        var dayIndex = (dayArry).findIndex((df) => df[0] == day);\n\n        if (dayIndex == -1) {\n            dayArry.push([\n                day,\n                1\n            ]);\n\n        } else {\n            dayArry.splice(dayIndex, 1, [\n                day,\n                dayArry[dayIndex][1] + 1\n            ]);\n        }\n    }\n\n    for (var f = 0; f < fishArry.length; f++) {\n\n        var fishDue = $tw.wiki.filterTiddlers(\"[{\" + fishArry[f] + \"!!due}]\")[0],\n            fishReview = $tw.wiki.filterTiddlers(\"[{\" + fishArry[f] + \"!!review}]\")[0],\n            fishHistoryArry = JSON.parse($tw.wiki.filterTiddlers(\"[{\" + fishArry[f] + \"!!history}]\")[0] || \"[]\");\n\n        if (fishDue) {\n            twTime2twDayArry(fishDue, dueDayArry);\n        }\n\n        if (fishReview) {\n            twTime2twDayArry(fishReview, reviewDayArry);\n        }\n\n        if (fishHistoryArry.length > 0) {\n\n            for (var h = 0; h < fishHistoryArry.length; h++) {\n                var historyReview = fishHistoryArry[h].review;\n\n                twTime2twDayArry(historyReview, reviewDayArry);\n            }\n\n        }\n    }\n\n    var option = {\n        tooltip: {\n            trigger: \"item\"\n        },\n        toolbox: {\n            show: true,\n            orient: \"herizontal\",\n            itemSize: 8,\n            feature: {\n                mark: { show: true },\n                restore: { show: true },\n                saveAsImage: {\n                    show: true,\n                    name: calendarLan\n                }\n            }\n        },\n        legend: {\n            top: \"0\",\n            height: \"10%\",\n            left: \"center\",\n            data: [memorizeLan, dueLan],\n            textStyle: {\n                color: \"\"\n            }\n        },\n        calendar: [\n            {\n                top: \"15%\",\n                left: \"center\",\n                width: \"80%\",\n                height: \"35%\",\n                range: [year + \"-01-01\", year + \"-06-30\"],\n                splitLine: {\n                    show: true,\n                    lineStyle: {\n                        color: \"#000\",\n                        width: 2,\n                        type: \"solid\"\n                    }\n                },\n                yearLabel: {\n                    formatter: year1stLan\n                },\n                itemStyle: {\n                    color: \"#323c48\",\n                    borderWidth: 1,\n                    borderColor: \"#111\"\n                }\n            },\n            {\n                top: \"60%\",\n                left: \"center\",\n                width: \"80%\",\n                height: \"35%\",\n                range: [year + \"-07-01\", year + \"-12-31\"],\n                splitLine: {\n                    show: true,\n                    lineStyle: {\n                        color: \"#000\",\n                        width: 2,\n                        type: \"solid\"\n                    }\n                },\n                yearLabel: {\n                    formatter: year2stLan\n                },\n                itemStyle: {\n                    color: \"#323c48\",\n                    borderWidth: 1,\n                    borderColor: \"#111\"\n                }\n            }\n        ],\n        series: [\n            {\n                name: memorizeLan,\n                type: \"scatter\",\n                coordinateSystem: \"calendar\",\n                data: reviewDayArry,\n                symbolSize: function (val) {\n                    return val[1] <= 20 ? val[1] / 2 : 10;\n                },\n                itemStyle: {\n                    opacity: 0.8,\n                    color: \"#ddb926\"\n                }\n            },\n            {\n                name: memorizeLan,\n                type: \"scatter\",\n                coordinateSystem: \"calendar\",\n                calendarIndex: 1,\n                data: reviewDayArry,\n                symbolSize: function (val) {\n                    return val[1] <= 20 ? val[1] / 2 : 10;\n                },\n                itemStyle: {\n                    opacity: 0.8,\n                    color: \"#ddb926\"\n                }\n            },\n            {\n                name: dueLan,\n                type: \"effectScatter\",\n                coordinateSystem: \"calendar\",\n                calendarIndex: 1,\n                data: dueDayArry,\n                symbolSize: function (val) {\n                    return val[1] <= 20 ? val[1] / 2 : 10;\n                },\n                showEffectOn: \"render\",\n                rippleEffect: {\n                    brushType: \"stroke\"\n                },\n                itemStyle: {\n                    opacity: 0.8,\n                    color: \"#f4e925\",\n                    shadowBlur: 10,\n                    shadowColor: \"#333\"\n                },\n                zlevel: 1\n            },\n            {\n                name: dueLan,\n                type: \"effectScatter\",\n                coordinateSystem: \"calendar\",\n                data: dueDayArry,\n                symbolSize: function (val) {\n                    return val[1] <= 20 ? val[1] / 2 : 10;\n                },\n                showEffectOn: \"render\",\n                rippleEffect: {\n                    brushType: \"stroke\"\n                },\n                itemStyle: {\n                    opacity: 0.8,\n                    color: \"#f4e925\",\n                    shadowBlur: 10,\n                    shadowColor: \"#333\"\n                },\n                zlevel: 1\n            }\n        ]\n    };\n\n    option && myChart.setOption(option);\n\n};","type":"application/javascript","module-type":"echarts-component"},"$:/plugins/oflg/fishing-analysis/calendar/calendar":{"title":"$:/plugins/oflg/fishing-analysis/calendar/calendar","caption":"<$text text={{{[{$:/language}removeprefix[$:/]addprefix[$:/plugins/oflg/fishing-analysis/]getindex[calendar]]~[[$:/plugins/oflg/fishing-analysis/languages/en-GB]getindex[calendar]]}}}/>","tags":"fishing-analysis","text":"<center style=\"font-size:20px;\"> \n    <$button\n        set=\"$:/temp/fishing!!year\"\n        setTo={{{[{$:/temp/fishing!!year}subtract[1]!match[-1]]~[<now YYYY>subtract[1]]}}}\n        class=\"tc-btn-invisible tc-tiddlylink\"\n \n    >\n        ◄\n    </$button> ''<$text text={{{[{$:/temp/fishing!!year}match[]then<now YYYY>else{$:/temp/fishing!!year}]}}}/>'' <$button\n        set=\"$:/temp/fishing!!year\"\n        setTo={{{[{$:/temp/fishing!!year}add[1]!match[1]]~[<now YYYY>add[1]]}}}\n        class=\"tc-btn-invisible tc-tiddlylink\"\n\n    >\n        ►\n    </$button>\n</center>\n\n<$echarts\n    $tiddler=\"$:/plugins/oflg/fishing-analysis/calendar/calendar.js\"\n    $height=\"380px\"\n    $fillSidebar=\"false\"\n/>"},"$:/plugins/oflg/fishing-analysis/icon":{"title":"$:/plugins/oflg/fishing-analysis/icon","tags":"$:/tags/Image","text":"<svg width=\"22px\" height=\"22px\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xmlns=\"http://www.w3.org/2000/svg\">\n  <g id=\"fishing-analysis\">\n    <path d=\"M0 0L1024 0L1024 1024L0 1024L0 0Z\" id=\"Background\" fill=\"none\" fill-rule=\"evenodd\" stroke=\"none\" />\n    <g clip-path=\"url(#mask_1)\">\n      <path d=\"M260.46 667.8C235.68 625.03 221.5 575.36 221.5 522.38L512 522.38L260.46 667.8L260.46 667.8Z\" id=\"Shape\" fill=\"#3D4265\" fill-rule=\"evenodd\" stroke=\"none\" />\n      <path d=\"M167.24 713.76L512 522.38L614.06 903.29C581.51 911.99 547.29 916.63 512 916.63C363.72 916.62 234.55 834.76 167.24 713.76L167.24 713.76ZM871.46 314.84C906.78 375.89 927 446.77 927 522.38C927 559.53 922.12 595.55 912.96 629.82L512 522.38L871.46 314.84L871.46 314.84ZM97 522.38C97 293.18 282.8 107.38 512 107.38L512 522.38L97 522.38L97 522.38Z\" id=\"Shape\" fill=\"#5778D8\" fill-rule=\"evenodd\" stroke=\"none\" />\n      <path d=\"M512 190.38C634.81 190.38 742.04 257.06 799.47 356.19L512 522.38L512 190.38L512 190.38ZM772.62 592.21C747.81 685.06 674.69 758.18 581.83 783L512 522.38L772.62 592.21L772.62 592.21Z\" id=\"Shape\" fill=\"#3D4265\" fill-rule=\"evenodd\" stroke=\"none\" />\n      <path d=\"M408.25 522.38C408.25 579.679 454.7 626.13 512 626.13C569.299 626.13 615.75 579.68 615.75 522.381C615.75 465.081 569.3 418.63 512 418.63C454.701 418.63 408.25 465.08 408.25 522.38L408.25 522.38Z\" id=\"Shape\" fill=\"#C3D2FB\" fill-rule=\"evenodd\" stroke=\"none\" />\n    </g>\n  </g>\n</svg>"},"$:/plugins/oflg/fishing-analysis/languages/en-GB":{"title":"$:/plugins/oflg/fishing-analysis/languages/en-GB","type":"application/json","text":"{\n    \"fishing\": \"Fishing\",\n    \"calendar\": \"Calendar\",\n    \"memorize\": \"Memorize\",\n    \"due\": \"Due\",\n    \"year1st\": \"{start} 1st\",\n    \"year2st\": \"{start} 2st\",\n    \"type\": \"Type\",\n    \"excerpt\": \"Excerpt Tiddler\",\n    \"question\": \"Q&A Question Tiddler\",\n    \"cloze\": \"Cloze Question Tiddler\",\n    \"select\": \"Select Question Tiddler\"\n}"},"$:/plugins/oflg/fishing-analysis/languages/zh-Hans":{"title":"$:/plugins/oflg/fishing-analysis/languages/zh-Hans","type":"application/json","text":"{\n    \"fishing\": \"钓鱼\",\n    \"calendar\": \"日历\",\n    \"memorize\": \"记忆\",\n    \"due\": \"到期\",\n    \"year1st\": \"{start} 上半年\",\n    \"year2st\": \"{start} 下半年\",\n    \"type\": \"种类\",\n    \"excerpt\": \"摘抄条目\",\n    \"question\": \"问答题条目\",\n    \"cloze\": \"填空题条目\",\n    \"select\": \"选择题条目\"\n}"},"$:/plugins/oflg/fishing-analysis/license":{"title":"$:/plugins/oflg/fishing-analysis/license","text":"\nMIT License\n\nCopyright (c) 2022 oflg\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE."},"$:/plugins/oflg/fishing-analysis/readme":{"title":"$:/plugins/oflg/fishing-analysis/readme","text":"Installation and usage tutorial is available at [[Fishing Manual|https://oflg.github.io/fishing/#Fishing%20Analysis%20sub-plugin]].\n\n可在 [[钓鱼手册|https://oflg.github.io/fishing/#钓鱼分析子插件]] 查看安装使用教程。\n"},"$:/core/ui/SideBar/FishingAnalysis":{"title":"$:/core/ui/SideBar/FishingAnalysis","caption":"<$text text={{{[{$:/language}removeprefix[$:/]addprefix[$:/plugins/oflg/fishing-analysis/]getindex[fishing]]~[[$:/plugins/oflg/fishing-analysis/languages/en-GB]getindex[fishing]]}}}/>","tags":"$:/tags/SideBar","text":"<div\n    class=\"tc-more-sidebar\"\n>\n<$macrocall\n    $name=\"tabs\"\n    tabsList=\"[all[shadows+tiddlers]tag[fishing-analysis]!has[draft.of]]\"\n    default=\"$:/plugins/oflg/fishing-analysis/calendar/calendar\"\n    state=\"$:/state/tab/fishing-analysis\"\n    class=\"tc-vertical tc-sidebar-tabs-more\"\n    explicitState=\"$:/state/tab/fishing-analysis\"\n/>\n</div>\n"},"$:/plugins/oflg/fishing-analysis/type/type.js":{"title":"$:/plugins/oflg/fishing-analysis/type/type.js","text":"/*\\\ntitle: $:/plugins/oflg/fishing-analysis/type/type.js\ntype: application/javascript\nmodule-type: echarts-component\nTiddler type for Fishing.\n\\*/\nexports.shouldUpdate = \"[{$:/temp/fishing!!year}]\";\n\nexports.onUpdate = function (myChart) {\n    var typeLan = $tw.wiki.filterTiddlers(\"[{$:/language}removeprefix[$:/]addprefix[$:/plugins/oflg/fishing-analysis/]getindex[type]]~[[$:/plugins/oflg/fishing-analysis/languages/en-GB]getindex[type]]\")[0],\n        excerptLan = $tw.wiki.filterTiddlers(\"[{$:/language}removeprefix[$:/]addprefix[$:/plugins/oflg/fishing-analysis/]getindex[excerpt]]~[[$:/plugins/oflg/fishing-analysis/languages/en-GB]getindex[excerpt]]\")[0],\n        questionLan = $tw.wiki.filterTiddlers(\"[{$:/language}removeprefix[$:/]addprefix[$:/plugins/oflg/fishing-analysis/]getindex[question]]~[[$:/plugins/oflg/fishing-analysis/languages/en-GB]getindex[question]]\")[0],\n        clozeLan = $tw.wiki.filterTiddlers(\"[{$:/language}removeprefix[$:/]addprefix[$:/plugins/oflg/fishing-analysis/]getindex[cloze]]~[[$:/plugins/oflg/fishing-analysis/languages/en-GB]getindex[cloze]]\")[0],\n        selectLan = $tw.wiki.filterTiddlers(\"[{$:/language}removeprefix[$:/]addprefix[$:/plugins/oflg/fishing-analysis/]getindex[select]]~[[$:/plugins/oflg/fishing-analysis/languages/en-GB]getindex[select]]\")[0];\n\n    var typeData = [\n        { value: $tw.wiki.filterTiddlers(\"[search:caption[{{||Excerpt}}]count[]]\")[0], name: excerptLan },\n        { value: $tw.wiki.filterTiddlers(\"[search:caption[{{||Question}}]count[]]\")[0], name: questionLan },\n        { value: $tw.wiki.filterTiddlers(\"[search:caption[{{||Cloze}}]count[]]\")[0], name: clozeLan },\n        { value: $tw.wiki.filterTiddlers(\"[search:caption[{{||Select}}]count[]]\")[0], name: selectLan }\n    ]\n\n\n    var option = {\n        tooltip: {\n            trigger: \"item\",\n            formatter: \"{b} : {c} ({d}%)\"\n        },\n        legend: {\n            left: \"center\"\n        },\n        toolbox: {\n            show: true,\n            orient: \"vertical\",\n            itemSize: 8,\n            feature: {\n                mark: { show: true },\n                restore: { show: true },\n                saveAsImage: {\n                    show: true,\n                    name: typeLan\n                }\n            }\n        },\n        series: [\n            {\n                type: \"pie\",\n                width: \"80%\",\n                radius: [\"20\", \"100\"],\n                roseType: \"radius\",\n                avoidLabelOverlap: false,\n                itemStyle: {\n                    borderRadius: 5\n                },\n                label: {\n                    show: false,\n                    position: \"center\"\n                },\n                emphasis: {\n                    label: {\n                        show: false,\n                        fontSize: \"20\",\n                        fontWeight: \"bold\"\n                    }\n                },\n                labelLine: {\n                    show: false\n                },\n                data: typeData\n            }\n        ]\n    };\n\n    option && myChart.setOption(option);\n\n};","type":"application/javascript","module-type":"echarts-component"},"$:/plugins/oflg/fishing-analysis/tiddlertype/tiddlertype":{"title":"$:/plugins/oflg/fishing-analysis/tiddlertype/tiddlertype","caption":"<$text text={{{[{$:/language}removeprefix[$:/]addprefix[$:/plugins/oflg/fishing-analysis/]getindex[type]]~[[$:/plugins/oflg/fishing-analysis/languages/en-GB]getindex[type]]}}}/>","list-after":"$:/plugins/oflg/fishing-analysis/calendar/calendar","tags":"fishing-analysis","text":"<$echarts\n    $tiddler=\"$:/plugins/oflg/fishing-analysis/type/type.js\"\n    $height=\"400px\"\n    $fillSidebar=\"false\"\n/>"}}}