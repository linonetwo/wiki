!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(c){"use strict";var t={completeSingle:!1};c.defineInitHook(function(e){e.on("change",function(e,i){if(!(e.state.completeActive&&"function"!=typeof e.showHint||"+input"===i.origin&&""===i.text[0].trim()&&""===i.text[1])){if("+delete"===i.origin){if(""===i.removed[0])return;if(i.to.ch<2)return;if(""===e.getDoc().getLine(i.to.line).substr(0,i.to.ch-1).trim())return}e.showHint(t)}})}),c.registerHelper("hint","tiddlywiki5",function(e){for(var i=e.getCursor(),t=e.getLine(i.line),r=i.ch,n=i.ch,o=[".","]","}",">"],l=["[","{","|",'"'];r;){var s=t.charAt(r-1);if(30<n-r||o.includes(s))return null;if(l.includes(s))break;r--}if(0==r)return null;var f=r!==n&&t.slice(r,n);return"$"==t.charAt(r)?{list:$tw.wiki.filterTiddlers(`[all[tiddlers]search:title:literal[${f}]!prefix[$:/state]]`),from:c.Pos(i.line,r),to:c.Pos(i.line,n)}:{list:$tw.wiki.filterTiddlers(`[all[tiddlers]!is[system]!is[shadow]search:title:literal[${f}]!prefix[$:/state]]`),from:c.Pos(i.line,r),to:c.Pos(i.line,n)}})});